[gd_scene format=3 uid="uid://cjgrg3l7f60lf"]

[ext_resource type="Script" uid="uid://4l2tw7700a7o" path="res://player.gd" id="1_a202f"]
[ext_resource type="Script" uid="uid://752w6obyey2e" path="res://enemy.gd" id="2_noarx"]
[ext_resource type="Script" uid="uid://ca685uc113riu" path="res://addons/cognite/node/cognite_node.gd" id="3_r3fl7"]
[ext_resource type="Resource" uid="uid://b81wumclk0brh" path="res://cognite/enemy.tres" id="4_r3fl7"]

[sub_resource type="PlaneMesh" id="PlaneMesh_4xowi"]

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_a202f"]
data = PackedVector3Array(1, 0, 1, -1, 0, 1, 1, 0, -1, -1, 0, 1, -1, 0, -1, 1, 0, -1)

[sub_resource type="CapsuleMesh" id="CapsuleMesh_noarx"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_a0tk4"]

[sub_resource type="SphereShape3D" id="SphereShape3D_4xowi"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_4xowi"]
ground_bottom_color = Color(0.15379122, 0.15926042, 0.2863424, 1)

[sub_resource type="Sky" id="Sky_a202f"]
sky_material = SubResource("ProceduralSkyMaterial_4xowi")

[sub_resource type="Environment" id="Environment_noarx"]
background_mode = 2
sky = SubResource("Sky_a202f")

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_r3fl7"]

[sub_resource type="Animation" id="Animation_wc5p8"]
resource_name = "Atack"
length = 2.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Model/perna2:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Model/perna:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Model/Sword:rotation")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.26666668, 0.52, 0.6, 0.6666667, 0.73333335),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(-0.17240362, -1.4265275, 0.6981316), Vector3(-1.0030234, -0.67612135, 0.49680096), Vector3(-1.0030235, -0.15814245, 0.4968009), Vector3(-1.0030236, -2.687561, 0.49680093), Vector3(-1.331363, -1.9583101, -2.1257567), Vector3(-1.1266377, -2.0441654, -2.9171245)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Model/Sword:position")
tracks/3/interp = 2
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.26666668, 0.52, 0.6, 0.6666667, 0.73333335),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0.5641079, 0, 0), Vector3(0.564, 0.2, -0.279), Vector3(0.58, 0.1, -0.518), Vector3(0.71201706, 0, 0.56791466), Vector3(-0.701, -0.163, 0.537), Vector3(-0.853, -0.263, 0.074)]
}

[sub_resource type="Animation" id="Animation_r3fl7"]
resource_name = "Idle"
length = 2.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Model/Base:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.53333336),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 0.16541934, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Model/Sword:position")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.8),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0.5641079, 0, 0), Vector3(0.564, 0.23, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Model/Sword:rotation")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.8),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, -1.5707964, 0.6981317), Vector3(0, -1.5707964, 1.0471976)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Model/perna:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Model/perna2:rotation")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_jka67"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Model/Base:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Model/Sword:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0.5641079, 0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Model/Sword:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-2.711654e-08, -1.5707964, -0.66919416)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Model/perna2:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Model/perna:rotation")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-0.7853982, 0, 0)]
}

[sub_resource type="Animation" id="Animation_i5arm"]
resource_name = "Walk"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Model/Base:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Model/perna2:rotation")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.49),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0.7853982, 0, 0), Vector3(-0.7853982, 0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Model/perna:rotation")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.49),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(-0.7853982, 0, 0), Vector3(0.7853981, 0, 0)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Model/Sword:position")
tracks/3/interp = 2
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.4),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0.5641079, 0, 0), Vector3(0.5641079, 0.17638707, 0)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Model/Sword:rotation")
tracks/4/interp = 2
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0, 0.56666666),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, -1.5707964, 0.6981316), Vector3(0, -1.5707964, 1.0210177)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_jka67"]
_data = {
&"Atack": SubResource("Animation_wc5p8"),
&"Idle": SubResource("Animation_r3fl7"),
&"RESET": SubResource("Animation_jka67"),
&"Walk": SubResource("Animation_i5arm")
}

[sub_resource type="CapsuleMesh" id="CapsuleMesh_a202f"]
height = 1.5

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_noarx"]
albedo_color = Color(0.67393494, 1.4535487e-05, 0.47076333, 1)

[sub_resource type="SphereMesh" id="SphereMesh_r3fl7"]
radius = 0.25
height = 0.5

[sub_resource type="CapsuleMesh" id="CapsuleMesh_r3fl7"]
radius = 0.225
height = 1.56

[sub_resource type="BoxMesh" id="BoxMesh_jka67"]
size = Vector3(0.285, 0.92, 0.075)

[sub_resource type="BoxMesh" id="BoxMesh_i5arm"]
size = Vector3(0.14, 0.33, 0.075)

[node name="Teste" type="Node3D" unique_id=519068162]

[node name="floor" type="MeshInstance3D" parent="." unique_id=162806187]
transform = Transform3D(17.185, 0, 0, 0, 17.185, 0, 0, 0, 17.185, 0, 0, 0)
mesh = SubResource("PlaneMesh_4xowi")

[node name="StaticBody3D" type="StaticBody3D" parent="floor" unique_id=1511710589]

[node name="CollisionShape3D" type="CollisionShape3D" parent="floor/StaticBody3D" unique_id=735214634]
shape = SubResource("ConcavePolygonShape3D_a202f")

[node name="Player" type="CharacterBody3D" parent="." unique_id=2098654301]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
script = ExtResource("1_a202f")
sensi = 0.2

[node name="MeshInstance3D" type="MeshInstance3D" parent="Player" unique_id=611671212]
mesh = SubResource("CapsuleMesh_noarx")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player" unique_id=1616345734]
shape = SubResource("CapsuleShape3D_a0tk4")

[node name="Spring" type="SpringArm3D" parent="Player" unique_id=1716311739]
shape = SubResource("SphereShape3D_4xowi")
spring_length = 5.0

[node name="Camera3D" type="Camera3D" parent="Player/Spring" unique_id=1028860132]

[node name="W" type="Node" parent="." unique_id=156657924]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="W" unique_id=1855366948]
transform = Transform3D(0.8660254, 0.4829629, -0.1294095, 0, 0.258819, 0.9659259, 0.49999997, -0.8365163, 0.22414385, 0, 2.9251142, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="W" unique_id=632312367]
environment = SubResource("Environment_noarx")

[node name="Enemy" type="CharacterBody3D" parent="." unique_id=802457462]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15.021158, 1, 0)
script = ExtResource("2_noarx")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enemy" unique_id=716297706]
shape = SubResource("CapsuleShape3D_r3fl7")

[node name="CogniteNode" type="Node" parent="Enemy" unique_id=1594535034]
script = ExtResource("3_r3fl7")
cognite_assemble = ExtResource("4_r3fl7")
life = null
distance = 0.0
animation = ""
metadata/_custom_type_script = "uid://ca685uc113riu"

[node name="Anima" type="AnimationPlayer" parent="Enemy" unique_id=199552132]
libraries/ = SubResource("AnimationLibrary_jka67")
playback_default_blend_time = 0.2

[node name="Model" type="Node3D" parent="Enemy" unique_id=1119646167]

[node name="Base" type="MeshInstance3D" parent="Enemy/Model" unique_id=938139771]
mesh = SubResource("CapsuleMesh_a202f")
surface_material_override/0 = SubResource("StandardMaterial3D_noarx")

[node name="perna" type="Node3D" parent="Enemy/Model" unique_id=713459099]
transform = Transform3D(1, 0, 0, 0, 0.70710653, 0.70710653, 0, -0.70710653, 0.70710653, 0.5, 0, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Enemy/Model/perna" unique_id=2072106604]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.80156046, 0)
mesh = SubResource("SphereMesh_r3fl7")

[node name="perna2" type="Node3D" parent="Enemy/Model" unique_id=1920135139]
transform = Transform3D(1, 0, 0, 0, 0.9999999, 0, 0, 0, 0.9999999, -0.5, 0, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Enemy/Model/perna2" unique_id=311451540]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.80156046, 0)
mesh = SubResource("SphereMesh_r3fl7")

[node name="Sword" type="Node3D" parent="Enemy/Model" unique_id=576828630]
transform = Transform3D(-5.110566e-08, -5.848446e-09, -0.9999996, -0.6203542, 0.7843217, 2.711653e-08, 0.78432184, 0.6203541, -4.371137e-08, 0.5641079, 0, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Enemy/Model/Sword" unique_id=2064367874]
transform = Transform3D(-1.5298985e-08, -0.35, 0, 0.35, -1.5298985e-08, 0, 0, 0, 0.35, 0, 0, 0)
mesh = SubResource("CapsuleMesh_r3fl7")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="Enemy/Model/Sword" unique_id=1002617892]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.53281176, 0)
mesh = SubResource("BoxMesh_jka67")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="Enemy/Model/Sword" unique_id=1473512404]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.53281176, 0)
mesh = SubResource("BoxMesh_jka67")

[node name="MeshInstance3D4" type="MeshInstance3D" parent="Enemy/Model/Sword" unique_id=1932823247]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.20307314, 0)
mesh = SubResource("BoxMesh_i5arm")

[node name="runtime_action" type="Label3D" parent="Enemy" unique_id=1524029249]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.0764735, 0)
pixel_size = 0.017
billboard = 1
text = "text"

[connection signal="finalized" from="Enemy/CogniteNode" to="Enemy" method="_on_cognite_node_finalized"]
[connection signal="request" from="Enemy/CogniteNode" to="Enemy" method="_on_cognite_node_request"]
[connection signal="started" from="Enemy/CogniteNode" to="Enemy" method="_on_cognite_node_started"]
[connection signal="animation_finished" from="Enemy/Anima" to="Player" method="_on_anima_animation_finished"]
